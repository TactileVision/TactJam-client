<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TactJam UI</title>
    
<!--    <link rel="stylesheet" href="node_modules/electron-tabs/electron-tabs.css">-->
    <link rel="stylesheet" href="compiled-css/style.css">
</head>
<body>

<div class="etabs-tabgroup">
    <div class="etabs-tabs"></div>
    <div class="etabs-buttons"></div>
</div>
<div class="etabs-views">

    <div id="connection-panel">
        <div class="connection-status">
            <span class="fas fa-circle not-connected"></span>
            <span id="connection-description">No device connected</span>
        </div>
        <span class="container-button"><i id="button-fold" class="fas fa-chevron-right"></i></span>
    </div>

</div>


<script>
    const TabGroup = require('electron-tabs');

    let tabGroup = new TabGroup();

    // add by hand the icons for each tab
    let slot1 = tabGroup.addTab({
        title: 'Slot 1',
        src: 'index.html',
        closable: false,
        visible: true,
        active: true
    });
    /* TODO not hardcoded here */
    let span = document.createElement('span');
    span.className = 'icons-buttons';
    span.innerHTML = '<i id="save-tab1" class="fas fa-save"></i><i class="fas fa-folder-open"></i>';
    slot1.tab.appendChild(span);
    document.getElementById('save-tab1').onclick = () => {
       slot1.webview.src = 'save.html';
    };


    let slot2 = tabGroup.addTab({
        title: 'Slot 2',
        src: 'index.html',
        closable: false,
        visible: true
    });
    span = document.createElement('span');
    span.className = 'icons-buttons';
    span.innerHTML = '<i id="save-tab2" class="fas fa-save"></i><i class="fas fa-folder-open"></i>';
    slot2.tab.appendChild(span);
    document.getElementById('save-tab2').onclick = () => {
        slot2.webview.src = 'save.html';
    };

    let slot3 = tabGroup.addTab({
        title: 'Slot 3',
        src: 'index.html',
        closable: false,
        visible: true
    });
    span = document.createElement('span');
    span.className = 'icons-buttons';
    span.innerHTML = '<i id="save-tab3" class="fas fa-save"></i><i class="fas fa-folder-open"></i>';
    slot3.tab.appendChild(span);
    document.getElementById('save-tab3').onclick = () => {
        slot3.webview.src = 'save.html';
    };


    // load all modules needed by each tacton page
    // load and save files
    const fs = require('fs');
    // manage dialog windows to save/load files
    const { dialog } = require("electron").remote;
    const { ipcRenderer } = require('electron');


    // make connection panel interactive
    let bf = document.getElementById('button-fold');
    document.getElementById('button-fold').onclick = () => {
        let cp = document.getElementById('connection-panel');
        console.log(cp.className);
        if(cp.className.includes('opened')) {
            cp.className = cp.className.replace('opened', '');
            bf.className = 'fas fa-chevron-right';
            document.getElementById('connection-description').className = '';
        }
        else {
            cp.className += 'opened';
            bf.className = 'fas fa-chevron-left';
            document.getElementById('connection-description').className = 'visible';
        }
    }
</script>

</body>

</html>